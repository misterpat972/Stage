<?php if ($products): ?> <div class="bzkshop bzkshop-box"><ul class=bzkshop-list> <?php foreach ($products as $product): ?> <li class=bzkshop-item tabindex=0 data-bzkshop="<?php echo esc_attr(base64_encode($product['url'])); ?>" <?php if($structured_data): ?> itemscope itemtype=http://schema.org/Product <?php endif ?>><div class=bzkshop-header><div class=bzkshop-image style="background-image:url(<?php echo esc_attr($product['image']); ?>)" data-skip-lazy> <?php if($structured_data): ?> <meta itemprop=image content="<?php echo esc_attr($product['image']); ?>"> <?php endif ?> </div></div><div class=bzkshop-content> <?php if (!empty($product['merchant_image'])): ?> <div class=bzkshop-logo style="background-image:url(<?php echo esc_attr($product['merchant_image']); ?>)" data-skip-lazy></div> <?php endif ?> <div class=bzkshop-title <?php if($structured_data): ?> itemprop=name <?php endif ?>><?php echo esc_html($product['title']); ?></div> <?php if (!empty($product['description'])): ?> <div class=bzkshop-description <?php if($structured_data): ?> itemprop=description <?php endif ?>><?php echo esc_html($product['description']); ?></div> <?php endif ?> <div class=bzkshop-offer <?php if($structured_data): ?> itemprop=offers itemscope itemtype=http://schema.org/Offer <?php endif ?>><span class=bzkshop-price <?php if($structured_data): ?> itemprop=price content="<?php echo esc_attr(number_format($product['price'], 2, '.', '')) ?>" <?php endif ?>><?php echo esc_html(number_format_i18n($product['price'], 2) . ' '.Bazooka_Shopping::currency($product, true)); ?></span> <?php if (!empty($product['discount_price']) && $product['discount_price']>$product['price']): ?> <span class=bzkshop-old-price><?php echo esc_html(number_format_i18n($product['discount_price'], 2) . ' '.Bazooka_Shopping::currency($product, true)); ?></span> <?php endif ?> <?php if (!empty($product['discount'])): ?> <span class=bzkshop-discount><?php echo esc_html('-' . number_format_i18n($product['discount']) . '%'); ?></span> <?php endif ?> <?php if($structured_data): ?> <meta itemprop=priceCurrency content="<?php echo Bazooka_Shopping::currency($product) ?>"><link itemprop=availability href=http://schema.org/InStock> <?php endif ?> </div> <?php if($cta = get_option('bazooka_shopping_cta', __('View Offer', 'bazooka-shopping'))): ?> <div class=bzkshop-button data-cta="<?php echo esc_attr($cta); ?>"></div> <?php endif ?> <?php if($structured_data): foreach(array('brand', 'sku', 'gtin13') as $prop): if(!empty($product[$prop])): ?> <meta itemprop="<?php echo $prop ?>" content="<?php echo $product[$prop] ?>"> <?php endif; endforeach; endif ?> </div></li> <?php endforeach; ?> </ul></div> <?php endif; ?>